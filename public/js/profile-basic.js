webpackJsonp([7],{11:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=t(0),n=t.n(i);n()(function(){function e(e,o){n()("#"+e).on("click",function(e){e.stopPropagation(),"block"===n()("#"+o).css("display")?n()(".drop-down").slideUp(200):(n()(".drop-down").slideUp(200),n()("#"+o).toggle(200))})}function o(e,o){n()("#"+e+" li").on("click",function(e){n()("#"+o).text(n()(e.target).text())})}function t(e,o){var o=n.a.parseJSON(o);1==o.status?n()("img[name=head]").attr("src",o.data.head_img):sweetAlert("上传失败!")}function i(e){e.children(".note").remove(),e.css("position","relative"),n()('<img src="/img/home/u44.png">').addClass("note").appendTo(e).css({position:"absolute",top:"14px",right:"-40px",width:"20px",whiteSpace:"nowrap"}),e.css("border-color","#d7d7d7")}function a(e,o){e.children(".note").remove(),e.css("position","relative"),n()('<div class="note"><img src="/img/home/u46.png"> '+o+"</div>").addClass("note").appendTo(e).css({position:"absolute",width:"20px",top:"12px",left:"440px",color:"red",zIndex:99,whiteSpace:"nowrap"}),e.css("border-color","red")}function s(e){var o=e.val(),t=o.indexOf("@");if(-1===t)return void a(n()("#email-box"),"邮箱格式不正确，请重新输入");var s=o.substring(t+1);if(".com"===s.substring(s.length-4)||".cn"===s.substring(s.length-3))return void i(n()("#email-box"));a(n()("#email-box"),"邮箱格式不正确，请重新输入")}n()("body").on("click",function(){n()(".drop-down").slideUp(200)}),e("btn-dropdown-type","drop-type"),e("btn-dropdown-province","drop-province"),e("btn-dropdown-city","drop-city"),e("btn-dropdown-county","drop-county"),o("drop-province","value-province"),o("drop-city","value-city"),o("drop-county","value-county"),n()("#drop-type li").on("click",function(e){n()("#service-type").val(n()(e.target).text())}),n()("#choose-icon").uploadify({debug:!1,method:"post",formData:{_token:$CSRFTOKEN},onInit:function(e){},buttonText:"上传图像",fileSizeLimit:"2MB",fileTypeExts:"*.gif; *.jpg; *.png",fileTypeDesc:"只能上传图片",swf:"/js/uploadify/uploadify.swf",buttonImage:"",buttonClass:"",uploader:"/personal/upload-head",width:80,onSelect:function(e){e.size>2048e3&&(sweetAlert("文件大小超过限制！"),n()("#choose-icon").uploadify("cancel",e.id))},onUploadSuccess:t,onUploadError:function(e,o,t,i){sweetAlert("The file "+e.name+" could not be uploaded: "+i)}}),n()("#profile-form").on("submit",function(e){e.preventDefault();var o=this.name,t=this.phone,i=this.area,a=this.real_name,s=this.sex,l=this.email,c=i.value.split("-")[0]||"",r=i.value.split("-")[1]||"";n.a.ajax({url:"/personal/info-edit",method:"POST",data:{name:o.value,phone:t.value,province:c,city:r,area:i.value.split("-")[2]||"",real_name:a.value,sex:s.value,email:l.value}}).then(function(e){1===e.status&&swal({title:"",text:'修改成功，<a href="/">返回首页</a>',html:!0,type:"success",showConfirmButton:!1})})}),n()("#name").on("blur",function(){n.a.ajax({url:"/check-username",type:"post",data:{name:n()(this).val()},success:function(e){1===e.status?i(n()("#name-box")):a(n()("#name-box"),e.message)}})}),n()("#password_confirmation").on("blur",function(){n()(this).val()!==n()("#password").val()?a(n()("#confirm"),"两次密码输入不一致，请重新设置密码"):i(n()("#confirm"))}),n()("#email").on("blur",function(){s(n()(this))}),n()("#email").on("keyup",function(){n()(".email-dropdown").show();var e=n()("#email").val();n()(".item-email").each(function(){var o=e.indexOf("@");if(-1!==o){var t=e.substring(o);-1===n()(this).data("value").indexOf(t)&&n()(this).hide()}else n()(this).show(),n()(this).text(e+n()(this).data("value"))})});var l=["@qq.com","@163.com","@126.com","@sina.com","@hptmail.com","@gmail.com","@hotmail.com","@sohu.com","@21cn.com"];!function(e){for(var o=0;o<e.length;o++)n()("<div></div>").addClass("item-email").data("value",e[o]).css({width:"100%",height:"40px",lineHeight:"40px",paddingLeft:"10px",borderBottom:"1px solid #f2f2f2",overflow:"hidden"}).click(function(){n()("#email").val(n()(this).text()),s(n()("#email"))}).appendTo(n()(".email-dropdown"))}(l),n()("body").click(function(){n()(".email-dropdown").hide(),n()("item-email").text("")}),n()("#datetimepicker").datetimepicker({minView:"month",format:"yyyy-mm-dd",language:"zh-CN",autoclose:!0})})},62:function(e,o,t){e.exports=t(11)}},[62]);