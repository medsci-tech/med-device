webpackJsonp([15],{3:function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(0),a=e.n(n);a()(function(){function i(i,t){a.a.ajax({url:"/get-hospital",type:"post",data:{province:i,city:t}}).then(function(i){if(1!==i.status)return void sweetAlert(i.message);var t=a()("#panel2 .items");t.empty();for(var e=i.data,n=0;n<e.length;n++){var s=e[n],o=a()('<div class="item" data-json='+JSON.stringify(s)+'><span class="name">'+s.hospital+"</span></div>"),c=a()('<input type="checkbox">').appendTo(o);o.click(function(){a()(this).children("input").click()}),c.click(function(){a()(this).click()}),o.appendTo(t)}})}function t(t,e){var n=a()(".city .drop-item");n.empty();for(var s=0;s<t.length;s++)if(t[s].name===e){for(var o=t[s].cities,c=0;c<o.length;c++)a()('<div data-prov="'+e+'">'+o[c].name+"</div>").addClass("item").click(function(){var t=a()(this).text();a()(".city span").text(t),h=t,i(a()(this).data("prov"),t)}).appendTo(n);break}}function e(i){if(0===a()("#item-container2 .inner").length)return!1;var t=!1;return a()("#item-container2 .inner").each(function(){a()(this).text()===i&&(t=!0)}),t}function n(i,t){this.json=i,this.data=this.json.map(function(i){return i.name}),this.index=t,this.panel=a()(".panel").eq(t),this.container=a()(".item-container").eq(t),this.btn_choose=a()(".btn-choose").eq(t),this.btn_panel=a()(".btn-panel").eq(t),this.chosen=[];for(var e=[],n=[],s=0;s<this.data.length;s++){var o=a()('<div class="item"><span>'+this.data[s]+"</span></div>").appendTo(this.panel),c=a()('<span class="icon"><span class="icon2"></span></span>'),r=a()('<div class="item" data-json='+JSON.stringify(this.json[s])+'><span class="inner">'+this.data[s]+"</span></div>").append(c).appendTo(this.container);e.push(o),n.push(r),o.on("click",function(i){return function(){a()(this).toggleClass("item-chosen"),n[i].toggleClass("item-chosen")}}(s)),c.on("click",function(i){return function(){e[i].toggleClass("item-chosen"),n[i].toggleClass("item-chosen")}}(s))}var l=this;this.btn_choose.on("click",function(){l.panel.fadeIn(),a()(".shielder").show()})}function s(i){i.children(".note").remove(),i.css("position","relative"),a()('<img src="/img/home/u44.png">').addClass("note").appendTo(i).css({position:"absolute",top:"14px",right:"-40px",width:"20px",whiteSpace:"nowrap"}),i.css("border-color","#d7d7d7")}function o(i,t){i.children(".note").remove(),i.css("position","relative"),a()('<div class="note"><img src="/img/home/u46.png"> '+t+"</div>").addClass("note").appendTo(i).css({position:"absolute",width:"20px",top:"12px",left:"440px",color:"red",zIndex:99,whiteSpace:"nowrap"}),i.css("border-color","red")}function c(i){var t=i.val(),e=t.indexOf("@");if(-1===e)return void o(a()("#email-box"),"邮箱格式不正确，请重新输入");var n=t.substring(e);if(".com"===n.substring(n.length-4)||".cn"===n.substring(n.length-3))return void s(a()("#email-box"));o(a()("#email-box"),"邮箱格式不正确，请重新输入")}var r,l;a.a.ajax({url:"/get-depart",success:function(i){r=i;new n(r,0)}}),a.a.ajax({url:"/get-service",success:function(i){l=i;new n(l,2)}});var p="",h="";a.a.getJSON("/json/loc.json").then(function(i){i=i;for(var e=0;e<i.length;e++)a()("<div>"+i[e].name+"</div>").addClass("item").click(function(){var e=a()(this).text();a()(".province span").text(e),a()(".city span").text(""),p=e,t(i,e)}).appendTo(a()(".province .drop-item"))}),a()(".search-box").on("keyup",function(){var i=a()(this).val();a()(".items .item").each(function(){var t=a()(this).children(".name");-1===t.text().indexOf(i)?(a()(this).hide(),a()(this).children("input")[0].checked=!1):a()(this).show()})}),a()(".province,.city").click(function(i){i.stopPropagation(),a()(this).children(".drop-item").slideToggle(160)}),a()("body").click(function(){a()(".drop-item").slideUp(160)});var d=function(i){var t=a()('<span class="icon"><span class="icon2"></span></span>'),e=a()('<div class="item" style="display:block" data-json='+JSON.stringify(i)+'><span class="inner">'+i.hospital+"</span></div>").append(t).appendTo(a()("#item-container2"));t.click(function(){e.remove()})};a()("#panel2 .btn-panel").click(function(){for(var i=a()(".items .item"),t=0;t<i.length;t++)i.eq(t).children("input")[0].checked&&!e(i.eq(t).children(".name").text())&&d(i.eq(t).data("json"))}),a()("#hospital").click(function(){a()("#panel2").fadeIn(),a()(".shielder").show()}),a()(".panel img,.shielder,.btn-panel").on("click",function(){a()(".shielder,.panel").hide()}),a()("#email").on("keyup",function(){a()(".email-dropdown").show();var i=a()("#email").val();a()(".item-email").each(function(){var t=i.indexOf("@");if(-1!==t){var e=i.substring(t);-1===a()(this).data("value").indexOf(e)&&a()(this).hide()}else a()(this).show(),a()(this).text(i+a()(this).data("value"))})});var u=["@163.com","@sina.com","@qq.com","@126.com","@vip.sina.com","@gmail.com","@hotmail.com","@sohu.com","@139.com"];!function(i){for(var t=0;t<i.length;t++)a()("<div></div>").addClass("item-email").data("value",i[t]).css({width:"100%",height:"40px",lineHeight:"40px",paddingLeft:"10px",borderBottom:"1px solid #f2f2f2",overflow:"hidden"}).click(function(){a()("#email").val(a()(this).text()),c(a()("#email"))}).appendTo(a()(".email-dropdown"))}(u),a()("body").click(function(){a()(".email-dropdown").hide(),a()("item-email").text("")}),a()("#email").on("blur",function(){c(a()(this))}),a()("#sign-form").on("submit",function(i){i.preventDefault();var t=this.name.value.trim(),e=this.email.value.trim(),n=this.sex.value;if(!t)return sweetAlert("姓名不能为空");if(!e)return sweetAlert("邮箱不能为空");var s=void 0,o=void 0,c=void 0;s=o=c="";var r=this.area.value.split(" - ");s=r[0],2===r.length&&(o=r[1]),3===r.length&&(o=r[1],c=r[2]);var l=[],p=[],h=[];a()("#item-container2 .item").each(function(){l.push(a()(this).data("json"))}),a()("#item-container1 .item").each(function(){a()(this).hasClass("item-chosen")&&p.push(a()(this).data("json"))}),a()("#item-container3 .item").each(function(){a()(this).hasClass("item-chosen")&&h.push(a()(this).data("json"))});var d={real_name:t,sex:n,email:e,province:s,city:o,area:c,depart_ids:JSON.stringify(p),service_type_ids:JSON.stringify(h),hospitals:JSON.stringify(l)};a.a.ajax({url:"/agent/agent-sign",type:"post",data:d,success:function(i){1===i.status?swal({text:'欢迎您成为药械经纪人，<a href="/">返回首页</a>',html:!0,type:"success"}):swal({title:"",text:i.message,type:"error"})}})})})},53:function(i,t,e){i.exports=e(3)}},[53]);